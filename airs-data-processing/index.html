<!doctype html>
<html class="no-js" lang="en">
<head>
		<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Data processing methodology for Am I Rent Stabilized.com</title>
	<link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/styles_feeling_responsive.css" />
	<script src="http://localhost:4000/assets/js/modernizr.min.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
  <script>
    WebFont.load({
      google: {
        families: [ 'Lato:400,700,400italic:latin', 'Work+Sans:400,700:latin' ]
      }
    });
  </script>

  <noscript>
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css' />
  </noscript>

  <meta name="google-site-verification" content="hb0oFgJAnd2i2LvJYSEIofF5sc24xc8hx2tTNittvHA" />
	
	<meta name="description" content="Documenting how I processed NYC open data and not so open data for the backend database of Am I Rent Stabilized?" />

	<link rel="author" href="https://plus.google.com/u/0/103791827597799558729"/>

	



	
	<link rel="icon" sizes="32x32" href="http://localhost:4000/assets/img/favicon-32x32.png" />




	
	<link rel="icon" sizes="192x192" href="http://localhost:4000/assets/img/touch-icon-192x192.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://localhost:4000/assets/img/apple-touch-icon-180x180-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000/assets/img/apple-touch-icon-152x152-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/apple-touch-icon-144x144-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000/assets/img/apple-touch-icon-120x120-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/apple-touch-icon-114x114-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000/assets/img/apple-touch-icon-76x76-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/apple-touch-icon-72x72-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/assets/img/apple-touch-icon-precomposed.png" />	




	
	<meta name="msapplication-TileImage" content="http://localhost:4000/assets/img/msapplication_tileimage.png" />




	
	<meta name="msapplication-TileColor" content="#fabb00" />



	<!-- Facebook Optimization -->
	<meta property="og:locale" content="en_EN" />
	
	<meta property="og:title" content="Data processing methodology for Am I Rent Stabilized.com" />
	<meta property="og:description" content="The portfolio and technical blog of Chris Henrick – provider of professional web development, data visualization, GIS, mapping, &amp; cartography services." />
	<meta property="og:url" content="http://localhost:4000//airs-data-processing/" />
	<meta property="og:site_name" content="Chris Henrick – Web Development, Data Visualization, GIS, Maps, and Cartography" />
	

	

	<!-- Search Engine Optimization -->
	<meta name="description" content="">
	<meta name="google-site-verification" content="hb0oFgJAnd2i2LvJYSEIofF5sc24xc8hx2tTNittvHA">
	
	
	<link rel="author" href="https://plus.google.com/u/0/103791827597799558729">
	
	
	<link rel="canonical" href="http://localhost:4000/airs-data-processing/">

	
	<!-- Twitter -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@chrislhenrick">
	<meta name="twitter:creator" content="@chrislhenrick">
	<meta name="twitter:title" content="Chris Henrick – Web Development, Data Visualization, GIS, Maps, and Cartography">
	<meta name="twitter:description" content="The portfolio and technical blog of Chris Henrick – provider of professional web development, data visualization, GIS, mapping, & cartography services.">
	<meta name="twitter:image" content="http://localhost:4000/images/clhenrick-landing-header.jpg">
	

	<link type="text/plain" rel="author" href="http://localhost:4000/humans.txt" />

	

	
</head>

</head>
<body id="top-of-page" class="">
	
	
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar>
    <ul class="title-area">
      <li class="name">
      <h1 class="show-for-small-only"><a href="http://localhost:4000" class="icon-tree"> Chris Henrick</a></h1>
    </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="right">
        

              

          
          
        

              

          
          
        

              

          
          
        

              

          
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://localhost:4000/search/">Search</a></li>

            
            
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://localhost:4000/contact/">Contact</a></li>

            
            
          
        
        
      </ul>

      <ul class="left">
        

              

          
          

            
            
              <li><a href="http://localhost:4000/">clhenrick</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a href="http://localhost:4000/work/">Work</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a href="http://localhost:4000/about/">About</a>

                  <ul class="dropdown">
                    

                      

                      <li><a href="http://localhost:4000/about/cv/">CV</a></li>
                    

                      

                      <li><a href="http://localhost:4000/about/talks/">Talks</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a href="http://localhost:4000/blog/">Blog</a>

                  <ul class="dropdown">
                    

                      

                      <li><a href="http://localhost:4000/blog/archive/">Blog Archive</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          
        

              

          
          
        
        
      </ul>
    </section>
  </nav>
</div><!-- /#navigation -->

	

	





	<div class="row t30">
	<div class="medium-8 columns medium-offset-2 end">
		<article itemscope itemtype="http://schema.org/Article">
			<header>
				

				<span itemprop="name">
					
					<h1>Data processing methodology for Am I Rent Stabilized.com</h1>
				</span>
			</header>


			
			<p class="teaser" itemprop="description">
				Documenting how I processed NYC open data and not so open data for the backend database of Am I Rent Stabilized?
			</p>
			

			<span itemprop="articleSection">
			<h2 id="toc">TOC</h2>
<ul>
  <li><a href="#background">Background</a></li>
  <li><a href="#dhcr-&amp;-mappluto-data-processing">DHCR &amp; MapPLUTO Data Processing</a></li>
  <li><a href="#creating-catchment-area-polygons-for-local-tenants-rights-organizations">Creating Catchment Area Polygons For Local Tenants Rights Organizations</a></li>
  <li><a href="#links-to-code-&amp;-data">Links to Code &amp; Data</a></li>
</ul>

<h2 id="background">Background</h2>
<p><a href="https://amirentstabilized.com"><em>Am I Rent Stabilized?</em></a> is a web application I conceptualized and designed that encourages New York City tenants to find out if their landlord may be illegally overcharging them for a rent stabilized apartment and if so, motivates them to take action. The development of the app was motivated by the lack of enforcement of rent regulation laws in NYC by the local and state government. It is an attempt at using open data as a prompt for civic action, rather than solely for visualization and analysis. The app first asks the user to input their address and borough, then checks it against a database of properties that are likely to have rent stabilized apartments. From here the app recommends a course of action and informs the user of their nearest tenants rights group so they can get help. The app features a responsive UI that is mobile friendly, and its content can be toggled to either Spanish or Chinese for non-english speakers.</p>

<p>The development of the app stems from a <a href="https://github.com/clhenrick/dhcr-rent-stabilized-data#foil-request-info">Freedom of Information Law request</a> I made in the Fall of 2014 for the <a href="http://www.nyshcr.org/">New York Department of Homes and Community Renewal</a>’s list of rent-stabilized buildings in a machine readable format. When I obtained the data I was then able to do an analysis on the NYC’s taxlot dataset, <a href="http://www.nyc.gov/html/dcp/html/bytes/applbyte.shtml#pluto">MapPLUTO</a>, to determine what properties in NYC likely have rent stabilized apartments, and are either registered or not registered with the DHCR. This is important as registration of rent-regulated apartments is essentially voluntary as it’s not enforced by any city or state agency (as far as I’m aware of) so it’s easy for landlords in NYC to lie to tenants about their apartment being rent-stabilized.</p>

<p>The first thing I did was map this data (those of you who know me are saying; “of course you did!”). Red are properties that are not on the DHCR’s list while blue are ones that are.
<a href="http://cdb.io/1bfz09d"><img src="/images/likely_rs_map.png" alt="" /></a></p>

<p>Visualizing the data was great, however I was interested in pushing the usefulness of this dataset a little further. After I shared my discovery with <a href="http://carolinewoolard.com/">Caroline Woolard</a>, an NYC based artist and activist, she suggested using the data in an app to let people know if they are rent stabilized. The rest is history.</p>

<p>Here are some screen shots of a few of the slides from the app’s landing page:</p>

<p><img src="/images/airs_landing_page.png" alt="" /></p>

<p><img src="/images/airs_address_search.png" alt="" /></p>

<p><img src="/images/airs_search_result_yes.png" alt="" /></p>

<h2 id="dhcr--mappluto-data-processing">DHCR &amp; MapPLUTO Data Processing</h2>
<p><em>Am I Rent Stabilized?</em> uses the dataset I created of properties that likely have rent stabilized apartments in NYC. I chose to stash this database on CartoDB so that I could take advantage of CartoDB’s SQL API and the CartoDB.JS library with the app. However I did a lot of data processing on my local machine before importing the data into CartoDB. This is mainly because the MapPLUTO dataset is too large to import into CartoDB without a paid plan that gives you more storage space.</p>

<p>The next part outlines how I got there.</p>

<h3 id="1-processing-the-dhcr-rent-stabilized-building-list">1. Processing the DHCR Rent Stabilized Building List</h3>
<p>The Excel workbooks I obtained from the FOIL request were normalized, stacked, and converted to a Comma Separated Value (CSV) file format using a <a href="https://github.com/clhenrick/dhcr-rent-stabilized-data/blob/master/index.js">Node JS script</a>. This allowed the data to be geocoded in one shot and then imported into a PostgreSQL database where it could be analyzed with the <a href="http://www.nyc.gov/html/dcp/html/bytes/applbyte.shtml#pluto">NYC MapPLUTO GIS tax lot data</a>.</p>

<h3 id="2-geocoding-the-processed-dhcr-data">2. Geocoding the Processed DHCR data</h3>

<p>A <a href="https://github.com/clhenrick/dhcr-rent-stabilized-data/blob/master/scripts/geocode-dhcr-list.py">Python script</a> was then used to obtain values for each property’s Borough - Block - Lot number (BBL), Building Identificaiton Number (BIN), and latitude - longitude coordinates from the <a href="https://developer.cityofnewyork.us/api/geoclient-api">NYC GeoClient API</a>. A propery’s street address and borough are passed to the GeoClient API which then returns lots of useful information about the property such as the BBL, BIN, latitude and logitude values.</p>

<h3 id="3-determining-nyc-properties-that-are-likely-rent-stabilized">3. Determining NYC Properties That Are Likely Rent Stabilized</h3>

<p>After processing and geocoding the DHCR data it was imported into a PostgreSQL database using <a href="https://csvkit.readthedocs.org/en/0.9.1/">CSVkit</a>’s csvsql command as follows:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">csvsql --db postgres:///nyc_pluto <span class="se">\</span>
--insert dhcr_rs_geocoded.csv <span class="se">\</span>
--table dhcr_rs</code></pre></figure>

<p>From here PostgreSQL was then used to analyze the data. <a href="https://github.com/clhenrick/dhcr-rent-stabilized-data/blob/master/scripts/select_pluto_from_dhcr.sql">Here is a link to the entire SQL code</a>, but the most important queries are the following:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- select the number of properties in the dhcr list the nyc map pluto data</span>
<span class="c1">-- returns 47,130 rows</span>
<span class="k">SELECT</span> <span class="k">Count</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">bbl</span><span class="p">)</span> <span class="k">FROM</span> 
    <span class="p">(</span>
        <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">bbl</span> <span class="k">FROM</span> <span class="n">map_pluto2014v2</span> 
    <span class="p">)</span> <span class="k">AS</span> <span class="n">a</span>
    <span class="k">INNER</span> <span class="k">JOIN</span>
    <span class="p">(</span>     
    <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="k">ON</span> <span class="p">(</span><span class="n">bbl</span><span class="p">)</span> <span class="n">bbl</span> <span class="k">FROM</span> <span class="n">dhcr_rs_w_bbls</span>
      <span class="k">WHERE</span> <span class="n">bbl</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
    <span class="p">)</span> <span class="k">AS</span> <span class="n">b</span> 
    <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">bbl</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">bbl</span><span class="p">;</span>
    
    
<span class="c1">-- select the number of properties in the dhcr list not in the map pluto "likely rent-stabilized" query </span>
<span class="c1">-- returns 12,549 rows</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">map_pluto2014v2_likely_rs</span> <span class="k">AS</span>
    <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">bbl</span><span class="p">)</span> <span class="k">FROM</span> 
        <span class="p">(</span>
            <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">bbl</span> <span class="k">FROM</span> <span class="n">map_pluto2014v2</span> 
            <span class="k">WHERE</span> <span class="n">yearbuilt</span> <span class="o">&lt;</span> <span class="mi">1974</span> <span class="k">AND</span> <span class="n">unitsres</span> <span class="o">&gt;=</span> <span class="mi">6</span> 
                <span class="k">AND</span> <span class="p">(</span>
                <span class="n">ownername</span> <span class="k">NOT</span> <span class="k">ILIKE</span> <span class="s1">'new york city housing authority'</span> 
                <span class="k">or</span> <span class="n">ownername</span> <span class="k">NOT</span> <span class="k">ILIKE</span> <span class="s1">'nycha'</span>
                <span class="p">)</span>
                <span class="k">AND</span> <span class="n">bldgclASs</span> <span class="k">NOT</span> <span class="k">ILIKE</span> <span class="s1">'r%'</span>    
        <span class="p">)</span> <span class="k">AS</span> <span class="n">a</span>
        <span class="k">LEFT</span> <span class="k">JOIN</span>
        <span class="p">(</span>     
        <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">bbl</span> <span class="k">FROM</span> <span class="n">dhcr_rs_w_bbls</span>
        <span class="k">WHERE</span> <span class="n">bbl</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">b</span> 
        <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">bbl</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">bbl</span>
        <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">bbl</span> <span class="k">IS</span> <span class="k">NULL</span><span class="p">;</span></code></pre></figure>

<p>These two queries tell us:</p>

<ul>
  <li>
    <p><strong>A.</strong> what properties in the MapPLUTO tax lot data match the DHCR’s rent-stabilized building list, and</p>
  </li>
  <li>
    <p><strong>B.</strong> what other properties are likely to have rent-stabilized apartments but aren’t on the DHCR list.</p>
  </li>
</ul>

<p>From here I created a table that combines data from both queries as well as a flag that states whether or not the property is listed in the DHCR data.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">map_pluto_not_dhcr</span> <span class="k">AS</span>
  	<span class="k">SELECT</span> <span class="n">not_dhcr</span><span class="p">.</span><span class="n">address</span><span class="p">,</span> 
              <span class="n">not_dhcr</span><span class="p">.</span><span class="n">unitsres</span><span class="p">,</span> 
              <span class="n">not_dhcr</span><span class="p">.</span><span class="n">borough</span><span class="p">,</span> 
              <span class="n">not_dhcr</span><span class="p">.</span><span class="n">ownername</span><span class="p">,</span> 
              <span class="n">not_dhcr</span><span class="p">.</span><span class="n">zipcode</span><span class="p">,</span> 
              <span class="n">not_dhcr</span><span class="p">.</span><span class="n">yearbuilt</span><span class="p">,</span> 
              <span class="n">not_dhcr</span><span class="p">.</span><span class="n">geom</span><span class="p">,</span>
              <span class="n">not_dhcr</span><span class="p">.</span><span class="n">cd</span><span class="p">,</span>
              <span class="n">not_dhcr</span><span class="p">.</span><span class="n">council</span><span class="p">,</span>
              <span class="n">not_dhcr</span><span class="p">.</span><span class="n">bbl</span><span class="p">::</span><span class="n">bigint</span>                
	  <span class="k">FROM</span>
	      <span class="p">(</span>
	          <span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="o">*</span>
	          <span class="k">FROM</span> 
	          <span class="p">(</span>
	              <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">map_pluto2014v2</span> 
	              <span class="k">WHERE</span> <span class="n">yearbuilt</span> <span class="o">&lt;</span> <span class="mi">1974</span> <span class="k">AND</span> <span class="n">unitsres</span> <span class="o">&gt;=</span> <span class="mi">6</span> 
	                  <span class="k">AND</span> <span class="p">(</span><span class="n">ownername</span> <span class="k">not</span> <span class="k">ILIKE</span> <span class="s1">'new york city housing authority'</span> <span class="k">or</span> <span class="n">ownername</span> <span class="k">not</span> <span class="k">ILIKE</span> <span class="s1">'nycha'</span><span class="p">)</span>
	                  <span class="k">AND</span> <span class="n">bldgclass</span> <span class="k">not</span> <span class="k">ILIKE</span> <span class="s1">'r%'</span>    
	          <span class="p">)</span> <span class="k">AS</span> <span class="n">a</span>
	          <span class="k">LEFT</span> <span class="k">JOIN</span>
	          <span class="p">(</span>     
	          <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">dhcr_rs_w_bbls</span>
	          <span class="k">WHERE</span> <span class="n">bbl</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
	          <span class="p">)</span> <span class="k">AS</span> <span class="n">b</span> 
	          <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">bbl</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">bbl</span>
	          <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">bbl</span> <span class="k">IS</span> <span class="k">NULL</span>
	      <span class="p">)</span> <span class="k">AS</span> <span class="n">not_dhcr</span><span class="p">;</span>
		
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">map_pluto_dhcr_rs</span> <span class="k">AS</span>
	  <span class="k">SELECT</span> <span class="n">dhcr</span><span class="p">.</span><span class="n">address</span><span class="p">,</span> 
	                  <span class="n">dhcr</span><span class="p">.</span><span class="n">unitsres</span><span class="p">,</span> 
	                  <span class="n">dhcr</span><span class="p">.</span><span class="n">borough</span><span class="p">,</span> 
	                  <span class="n">dhcr</span><span class="p">.</span><span class="n">ownername</span><span class="p">,</span> 
	                  <span class="n">dhcr</span><span class="p">.</span><span class="n">zipcode</span><span class="p">,</span> 
	                  <span class="n">dhcr</span><span class="p">.</span><span class="n">yearbuilt</span><span class="p">,</span> 
	                  <span class="n">dhcr</span><span class="p">.</span><span class="n">geom</span><span class="p">,</span>
	                  <span class="n">dhcr</span><span class="p">.</span><span class="n">cd</span><span class="p">,</span>
	                  <span class="n">dhcr</span><span class="p">.</span><span class="n">council</span><span class="p">,</span>
	                  <span class="n">dhcr</span><span class="p">.</span><span class="n">bbl</span><span class="p">::</span><span class="n">bigint</span>
	  <span class="k">FROM</span>
	      <span class="p">(</span><span class="k">SELECT</span> <span class="k">c</span><span class="p">.</span><span class="n">address</span><span class="p">,</span> 
	                      <span class="k">c</span><span class="p">.</span><span class="n">unitsres</span><span class="p">,</span> 
	                      <span class="k">c</span><span class="p">.</span><span class="n">borough</span><span class="p">,</span> 
	                      <span class="k">c</span><span class="p">.</span><span class="n">ownername</span><span class="p">,</span> 
	                      <span class="k">c</span><span class="p">.</span><span class="n">zipcode</span><span class="p">,</span> 
	                      <span class="k">c</span><span class="p">.</span><span class="n">yearbuilt</span><span class="p">,</span> 
	                      <span class="k">c</span><span class="p">.</span><span class="n">bbl</span><span class="p">,</span>
	                      <span class="k">c</span><span class="p">.</span><span class="n">cd</span><span class="p">,</span>
	                      <span class="k">c</span><span class="p">.</span><span class="n">council</span><span class="p">,</span>
	                      <span class="k">c</span><span class="p">.</span><span class="n">geom</span>
	          <span class="k">FROM</span> 
	          <span class="n">map_pluto2014v2</span> <span class="k">c</span><span class="p">,</span>
	          <span class="p">(</span>     
	          <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">bbl</span> <span class="k">FROM</span> <span class="n">dhcr_rs_w_bbls</span>
	          <span class="k">WHERE</span> <span class="n">bbl</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
	          <span class="p">)</span> <span class="n">d</span>
	          <span class="k">WHERE</span> <span class="k">c</span><span class="p">.</span><span class="n">bbl</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">bbl</span>     
	      <span class="p">)</span> <span class="k">AS</span> <span class="n">dhcr</span><span class="p">;</span>
		
		
<span class="c1">-- I then added a column to identify properties that are registered or not registered with the DHCR:</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">map_pluto_not_dhcr</span> <span class="k">add</span> <span class="k">column</span> <span class="n">registered</span> <span class="n">boolean</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">map_pluto_not_dhcr</span> <span class="k">set</span> <span class="n">registered</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">map_pluto_dhcr_rs</span> <span class="k">add</span> <span class="k">column</span> <span class="n">registered</span> <span class="n">boolean</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">map_pluto_dhcr_rs</span> <span class="k">set</span> <span class="n">registered</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
		
		
<span class="c1">-- now these two tables can be combined AND have a boolean value for whether or not they are in the DHCR's rent-stabilized buildings list. </span>
<span class="c1">-- 59,679 rows total.</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">map_pluto2014v2_likely_rs</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">map_pluto_likely_rs</span> <span class="k">AS</span>
    <span class="k">SELECT</span> <span class="o">*</span> 
    <span class="k">FROM</span>
        <span class="n">map_pluto_not_dhcr</span>
    <span class="k">UNION</span>
    <span class="k">SELECT</span> <span class="o">*</span> 
    <span class="k">FROM</span>
        <span class="n">map_pluto_dhcr_rs</span><span class="p">;</span>


<span class="c1">-- check to make sure the data looks good:</span>
<span class="k">SELECT</span> <span class="k">Count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">registered</span> <span class="k">IS</span> <span class="k">NULL</span><span class="p">;</span>
    <span class="c1">-- returns 0 rows</span>
<span class="k">SELECT</span> <span class="k">Count</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">bbl</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span><span class="p">;</span>
  <span class="c1">-- returns 59,679 rows</span>
<span class="k">SELECT</span> <span class="k">Count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">geom</span> <span class="k">IS</span> <span class="k">NULL</span><span class="p">;</span>
    <span class="c1">-- returns 0 rows</span>
<span class="k">SELECT</span> <span class="k">Sum</span><span class="p">(</span><span class="n">unitsres</span><span class="p">)</span> <span class="k">AS</span> <span class="n">total_res_units</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span><span class="p">;</span>
    <span class="c1">-- returns 1,962,469</span></code></pre></figure>

<h3 id="4-further-data-processing-using-cartodb">4. Further Data Processing Using CartoDB</h3>

<p>Lastly, the data was imported into CartoDB and some final tweaks to the data were made. Mainly this involved removing properties that belong to the New York City Housing Authority. To find out how many different spellings of this agency name were in the table, I did a spatial intersect with the <a href="https://data.cityofnewyork.us/Housing-Development/Map-of-NYCHA-Developments/i9rv-hdr5">NYCHA property data</a>.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">--  Remove all properties owned by the NYC Housing Authority that were missed.</span>
<span class="c1">--  This involved doing a spatial intersect with polygon centroids created from </span>
<span class="c1">-- a shapefile of NYCHA properties from 2011 to determine all spellings of "NYCHA"</span>

<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">a</span><span class="p">.</span><span class="n">ownername</span> 
<span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="n">a</span><span class="p">,</span> <span class="n">nycha_centroids</span> <span class="n">b</span>
<span class="k">where</span> 
  <span class="n">ST_Intersects</span><span class="p">(</span>
      <span class="n">a</span><span class="p">.</span><span class="n">the_geom</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">the_geom</span>
  <span class="p">)</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">ownername</span>

<span class="c1">-- remove properties that are obviously owned by NYCHA</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">ownername</span> <span class="k">LIKE</span> <span class="s1">'NYC HOUSING%'</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">ownername</span> <span class="k">ILIKE</span> <span class="s1">'new york city%'</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">ownername</span> <span class="k">LIKE</span> <span class="s1">'NYC CITY HSG%'</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">ownername</span> <span class="o">=</span> <span class="s1">'CITY OF NEW YORK'</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">ownername</span> <span class="k">LIKE</span> <span class="s1">'N Y C H A%'</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">ownername</span> <span class="k">LIKE</span> <span class="s1">'N.Y.C. HOUSING AUTHOR%'</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">ownername</span> <span class="k">LIKE</span> <span class="s1">'N Y C HOUSING AUTHORI%'</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">ownername</span> <span class="o">=</span> <span class="s1">'NY HOUSING AUTHORITY'</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">map_pluto_likely_rs</span> <span class="k">WHERE</span> <span class="n">ownername</span> <span class="o">=</span> <span class="s1">'NEW YRK CTY HSG AUTHR'</span><span class="p">;</span>

<span class="c1">-- pgsql2shp converted boolean value of the "registered" column to T / F, </span>
<span class="c1">-- so I changed the valuse to 'yes' / 'no' for CartoDB Infowindows</span>
<span class="k">UPDATE</span> <span class="n">map_pluto_likely_rs</span> <span class="k">set</span> <span class="n">registered</span> <span class="o">=</span> <span class="s1">'no'</span> <span class="k">WHERE</span> <span class="n">registered</span> <span class="o">=</span> <span class="s1">'F'</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">map_pluto_likely_rs</span> <span class="k">set</span> <span class="n">registered</span> <span class="o">=</span> <span class="s1">'yes'</span> <span class="k">WHERE</span> <span class="n">registered</span> <span class="o">=</span> <span class="s1">'T'</span><span class="p">;</span>

<span class="c1">-- change boro codes to actual names for CartoDB Infowindows</span>
<span class="k">UPDATE</span> <span class="n">map_pluto_likely_rs</span> <span class="k">set</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'Queens'</span> <span class="k">WHERE</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'QN'</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">map_pluto_likely_rs</span> <span class="k">set</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'Brooklyn'</span> <span class="k">WHERE</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'BK'</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">map_pluto_likely_rs</span> <span class="k">set</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'Staten Island'</span> <span class="k">WHERE</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'SI'</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">map_pluto_likely_rs</span> <span class="k">set</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'Bronx'</span> <span class="k">WHERE</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'BX'</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">map_pluto_likely_rs</span> <span class="k">set</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'Manhattan'</span> <span class="k">WHERE</span> <span class="n">borough</span> <span class="o">=</span> <span class="s1">'MN'</span><span class="p">;</span></code></pre></figure>

<h2 id="creating-catchment-area-polygons-for-local-tenants-rights-organizations">Creating Catchment Area Polygons For Local Tenants Rights Organizations</h2>

<p>In order to inform a user as to whether or not any local tenants rights organizations are operating within their neighborhood, <a href="https://github.com/clhenrick/nyc_tenants_rights_orgs_service_areas">custom polygon geospatial data</a> was created to respresent each of 94 organization’s service areas. This was a necessary step as many housing rights organizations work within specific neighborhoods, zipcodes, community boards, or other boundaries and will not assist people outside of those boundaries. This is a understable decision for these groups to make given the density of NYC and the fact that something like 80% of its residents are renters. Housing orgs are more often than not under staffed and over worked so must limit who they can help to ensure they do their work effectively.</p>

<h3 id="scraping-dhcrs-community-based-housing-organizations">Scraping DHCR’s Community Based Housing Organizations</h3>
<p>First, a list of <a href="http://www.nyshcr.org/Rent/HousingOrgs.htm">Community Based Housing Organizations</a> was scraped from an HTML table on the DHCR’s website using a <a href="https://github.com/clhenrick/DHCR_Community_Based_Housing_Orgs/blob/master/scraper.py">Python script</a>. Organizations that operate in the boroughs / counties that make up NYC were pulled out from the scraped data into a new table.</p>

<h3 id="creating-the-catchment-areas">Creating the Catchment Areas</h3>
<p>For these 94 organizations, polygon data was manually created representing each organization’s service area. Reference polygon geospatial data sources used to create the service areas include <a href="http://nyc.pediacities.com/New_York_City_Neighborhoods">Pediatcities NYC Neighborhood boundaries</a>, <a href="http://www.nyc.gov/html/dcp/html/bytes/applbyte.shtml#other">NYC Planning Neighborhood Tabulation Areas</a>, U.S. Census Zipcode Tabulation Areas, and <a href="http://www.nyc.gov/html/dcp/html/bytes/applbyte.shtml#district_political">NYC Planning Community District boundaries</a>. This data was copied and in some cases aggregated (dissolved) into a new dataset using MAPublisher, a GIS plug-in for Adobe Illustrator. In some cases boundaries had to be drawn by hand, such as for the Cooper Square Committee which operates within a very specific area in the East Village of Manhattan. Once completed, the polygon data was joined to the DHCR Community Housing Based Organizations for NYC and then exported to a shapefile format.</p>

<p>The data was then imported into CartoDB for use with <em>Am I Rent Stabilized?</em>. When a user’s address is geocoded, a “point in polygon” SQL query is made using PostGIS to the data in CartoDB.</p>

<p>For example:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">nyc_tenants_rights_service_areas</span>
<span class="k">WHERE</span> 
<span class="n">ST_Contains</span><span class="p">(</span>
  <span class="n">nyc_tenants_rights_service_areas</span><span class="p">.</span><span class="n">the_geom</span><span class="p">,</span>
  <span class="n">ST_GeomFromText</span><span class="p">(</span>
   <span class="s1">'Point(-73.917104 40.694827)'</span><span class="p">,</span> <span class="mi">4326</span>
  <span class="p">)</span>      
<span class="p">);</span></code></pre></figure>

<p>If a user’s address is within a group’s cachment area, then that group’s information is passed into a modal in the app. This modal displays information such as the group’s website url, phone number, contact person, and/or address. As what’s present in this data varies from group to group, a Handlebars.js helper function is used to check if the data exists before passing it to the Handlebars HTML template:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">H</span> <span class="o">=</span> <span class="nx">Handlebars</span><span class="p">;</span>

<span class="nx">H</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s1">'each'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">context</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span> <span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="nx">context</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">H</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s1">'if'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">conditional</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">conditional</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">options</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">options</span><span class="p">.</span><span class="nx">inverse</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></figure>

<p>The Handlebars HTML template looks like this:</p>

<figure class="highlight"><pre><code class="language-handlebars" data-lang="handlebars">    <span class="c">&lt;!-- handlebars template for local tenants rights group list --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">id=</span><span class="s">"org-template"</span> <span class="na">type=</span><span class="s">"text/x-handlebars-template"</span><span class="nt">&gt;</span><span class="err">
      &lt;div class="org-container"&gt;
        &lt;a href="#close" title="Close" class="close"&gt;X&lt;/a&gt;
        &lt;h1&gt;
          Here are some groups that help people with housing 
          issues in your neighborhood:
        &lt;/h1&gt; 
        </span><span class="k">{{#</span><span class="nn">each</span> <span class="nv">orgs</span><span class="k">}}</span><span class="err">
          &lt;div class="tr-org-info"&gt;          
            &lt;h3&gt;</span><span class="k">{{</span><span class="nv">name</span><span class="k">}}</span><span class="err">&lt;/h3&gt;
            </span><span class="k">{{#if</span> <span class="nv">website</span><span class="k">}}</span><span class="err">
            &lt;p class="website-url"&gt;&lt;span&gt;Website: &lt;/span&gt;&lt;a target="_blank" href="</span><span class="k">{{</span><span class="nv">website</span><span class="k">}}</span><span class="err">"&gt;</span><span class="k">{{</span><span class="nv">website</span><span class="k">}}</span><span class="err">&lt;/a&gt;&lt;/p&gt;
            </span><span class="k">{{/if}}</span><span class="err">
            </span><span class="k">{{#if</span> <span class="nv">phone</span><span class="k">}}</span><span class="err">
            &lt;p class="phone-no"&gt;&lt;span&gt;Phone: &lt;/span&gt;</span><span class="k">{{</span><span class="nv">phone</span><span class="k">}}</span><span class="err">&lt;/p&gt;
            </span><span class="k">{{/if}}</span><span class="err">
            </span><span class="k">{{#if</span> <span class="nv">address</span><span class="k">}}</span><span class="err">
            &lt;p class="address"&gt;&lt;span&gt;Address: &lt;/span&gt;</span><span class="k">{{</span><span class="nv">address</span><span class="k">}}</span><span class="err">&lt;/p&gt;
            </span><span class="k">{{/if}}</span><span class="err">
            </span><span class="k">{{#if</span> <span class="nv">email</span><span class="k">}}</span><span class="err">
            &lt;p class="email"&gt;&lt;span&gt;Email: &lt;/span&gt;</span><span class="k">{{</span><span class="nv">email</span><span class="k">}}</span><span class="err">&lt;/p&gt;
            </span><span class="k">{{/if}}</span><span class="err">
            &lt;p class="description"&gt;&lt;span&gt;Description: &lt;/span&gt;&lt;br&gt;
              </span><span class="k">{{</span><span class="nv">description</span><span class="k">}}</span><span class="err">
            &lt;/p&gt;
          &lt;/div&gt;
        </span><span class="k">{{/</span><span class="nn">each</span><span class="k">}}</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>That’s about it, thanks for reading and please feel free to <a href="http://localhost:4000/contact">ping me</a> if you have any questions or comments.</p>

<h2 id="links-to-code--data">Links to Code &amp; Data</h2>
<ul>
  <li><a href="https://github.com/clhenrick/am-i-rent-stabilized">Github Repo for Am I Rent Stabilized</a></li>
  <li><a href="http://cdb.io/1bfz09d">Visualization of NYC properties that likely have rent-stabilized apartments</a></li>
  <li><a href="https://github.com/clhenrick/dhcr-rent-stabilized-data">DHCR Rent Stabilized Building List</a> <br />
(<strong>note:</strong> this is just a list of addresses that have one or more rent stabilized apartments, not the actual apartment numbers)</li>
  <li><a href="http://chenrick.cartodb.com/tables/all_nyc_likely_rent_stabl_merged/public">NYC Likely Rent-Stabilized GIS data</a></li>
  <li><a href="https://github.com/clhenrick/nyc_tenants_rights_orgs_service_areas">NYC Local Tenants Rights Groups Service Areas</a></li>
</ul>

<p>[^ Back to the top](#top)</p>

			</span>

			
						<div id="page-meta" class="t30">
				<p>
					<!-- Look the author details up from the site config. -->
					
					<!-- Output author details if some exist. -->
					
					<span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="pr20 icon-edit"><a href="http://clhenrick.io/" target="_blank"> Chris Henrick</a></span>
				</span>
				

				
				<time class="icon-calendar pr20" datetime="2015-06-01" itemprop="datePublished"> 2015-06-01</time>
				

				<span class="icon-archive pr20"> </span>
				<br />
				<span class="pr20"><span class="icon-price-tag pr10"> data</span> <span class="icon-price-tag pr10"> web-scraping</span> <span class="icon-price-tag pr10"> cartodb</span> <span class="icon-price-tag pr10"> web-mapping</span> <span class="icon-price-tag pr10"> postgis</span> <span class="icon-price-tag pr10"> sql</span> </span>
			</p>

			<div id="post-nav" class="row">
				
				<div class="small-4 columns text-center"><a class="button small radius prev" href="http://localhost:4000/scraping-photo-metadata/">&laquo; Scraping Photo Metadata</a></div><!-- /.small-4.columns -->
				
				<div class="small-4 columns text-center"><a class="radius button small" href="http://localhost:4000/blog/archive/" title="Blog Archive">Archive</a></div><!-- /.small-4.columns -->
				
				<div class="small-4 columns text-center"><a class="button small radius next" href="http://localhost:4000/wrangling-311-data/">Wrangling NYC's 311 data &raquo;</a></div><!-- /.small-4.columns -->
				
			</div>
			</div><!--  /.page-meta -->
			

			
						
				<h3 id="comments" class="t60">Dialogue &amp; Discussion</h3>
				<div id="disqus_thread"></div>
				<script>
				    var disqus_config = function () {
				        this.page.url =  'http://localhost:4000'
				        this.page.identifier = '/airs-data-processing/';
								this.page.title = 'Data processing methodology for Am I Rent Stabilized.com';
				    };
				    (function() {  // DON'T EDIT BELOW THIS LINE
				        var d = document, s = d.createElement('script');

				        s.src = '//clhenrick.disqus.com/embed.js';

				        s.setAttribute('data-timestamp', +new Date());
				        (d.head || d.body).appendChild(s);
				    })();
				</script>
				<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			

			
		</article>
	</div><!-- /.medium-8.columns -->


	


	
</div><!-- /.row -->


	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      <div id="footer">
        <div class="row">
          <div class="medium-6 large-5 columns">
            <h5 class="shadow-black">About This Site</h5>

            <p class="">
              The portfolio and technical blog of Chris Henrick – provider of professional web development, data visualization, GIS, mapping, & cartography services.
              <a href="http://localhost:4000/about/">More ›</a>
            </p>
          </div><!-- /.large-6.columns -->


          <div class="small-6 medium-3 large-3 large-offset-1 columns">
            
              
                <h5 class="shadow-black">Services</h5>
              
            
              
            
              
            
              
            
              
            

              <ul class="no-bullet shadow-black">
              
                
                  <li >
                    <a href=""  title=""></a>
                  </li>
              
                
                  <li >
                    <a href="/contact/"  title="Contact">Contact</a>
                  </li>
              
                
                  <li >
                    <a href="/feed.xml"  title="Subscribe to RSS Feed">RSS</a>
                  </li>
              
                
                  <li >
                    <a href="/atom.xml"  title="Subscribe to Atom Feed">Atom</a>
                  </li>
              
                
                  <li >
                    <a href="/sitemap.xml"  title="Sitemap for Google Webmaster Tools">sitemap.xml</a>
                  </li>
              
              </ul>
          </div><!-- /.large-4.columns -->


          <div class="small-6 medium-3 large-3 columns">
            
              
                <h5 class="shadow-black">Network</h5>
              
            
              
            
              
            

            <ul class="no-bullet shadow-black">
            
              
                <li >
                  <a href=""  title=""></a>
                </li>
            
              
                <li class="services-newsletter" >
                  <a href="http://foundation.zurb.com/" target="_blank"  title="Built on Foundation">Built on Foundation</a>
                </li>
            
              
                <li class="site-code" >
                  <a href="https://github.com/clhenrick/portfolio" target="_blank"  title="Code available on Github">Code on Github</a>
                </li>
            
            </ul>
          </div><!-- /.large-3.columns -->
        </div><!-- /.row -->

      </div><!-- /#footer -->


      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="small-12 medium-6 columns credits">
            <p>
              Created with &hearts;
              by&nbsp;<a href="http://clhenrick.io/">Chris&nbsp;Henrick</a>
              using&nbsp;<a href="http://jekyllrb.com/" target="_blank">Jekyll</a>
              based&nbsp;on&nbsp;<a href="http://phlow.github.io/feeling-responsive/">Feeling&nbsp;Responsive</a>.
            </p>
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns">
            <ul class="inline-list social-icons">
            
              <li><a href="https://github.com/clhenrick" target="_blank" class="icon-github" title="Code"></a></li>
            
              <li><a href="https://twitter.com/chrislhenrick" target="_blank" class="icon-twitter" title="Twitter"></a></li>
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	

<!-- jQuery -->
<script src="http://localhost:4000/assets/js/javascript.min.js"></script>
<!-- lazy load -->
<script src="http://localhost:4000/assets/js/jquery.lazyload.min.js"></script>

<script type="text/javascript">
// make all external links open in a new browser tab
// code credit: https://css-tricks.com/snippets/jquery/open-external-links-in-new-window/
$(function(){
  $('a').each(function() {
     var a = new RegExp('/' + window.location.host + '/');
     if(!a.test(this.href)) {
         $(this).click(function(event) {
             event.preventDefault();
             event.stopPropagation();
             window.open(this.href, '_blank');
         });
     }
  });

  // lazy load images with class "lazy"
  $("img.lazy").lazyload({
    threshold: 200,
    effect: "fadeIn"
  });
});

</script>








<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69968207-1', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');

</script>







</body>
</html>

